$fitnessType = avgLastBoolScore

$qFunctions = f.allNamed(fs = m.sKeyMap(
  keys = [behavior; avgLastBoolScore; increase; consistency];
  values = [
    f.identity();
    ds.e.sBool.avgScore(
      scoreType = boolean;
      caseIndexes = [360:1:399]   % last 40 cases
    );
    ds.e.sBool.avgScoreDelta(
      scoreType = unlimited;
      firstIndexes = [-10:1:-1];  % the last 40 cases
      secondIndexes = [0:1:1]     % the first 4 cases
    );
    ds.e.sBool.avgScoreVariation(
      scoreType = unlimited;
      indexes = [-8:1:-1]         % last 8 cases
    )
  ]
))

$seqXorPproblem = ea.p.simToTo(
  name = "seqXorProblem";
  simulation = ds.s.sequentialXor(
    cases = $cases;
    rewardType = unlimited;
    resetAgent = true;
    shuffle = true
  );
  dT = 1;
  tRange = $tRangeLife;
  comparator = ea.comparator.descending(of = f.mapValue(key = $fitnessType));
  qFunction = $qFunctions
)

$biXorProblem = ea.p.simToTo(
  name = "bi-xor";
  simulation = ds.s.sequentialBf(
    cases = $cases;
    target = ea.misc.bf(exprs = [
      "and(or(0;1);not(and(0;1)))";
      "not(and(or(0;1);not(and(0;1))))"
    ]);
    rewardType = unlimited;
    resetAgent = true;
    shuffle = true
  );
  dT = 1;
  tRange = $tRangeLife;
  comparator = ea.comparator.descending(of = f.mapValue(key = $fitnessType));
  qFunction = $qFunctions
)