$fitnessType = avgLastBoolScore
$caseIndexesParity5 = [928:1:959]   % last 32
$caseIndexesParity3 = [232:1:239]   % last 8
$caseIndexesMopm3 = [1856:1:1919]   % last 64
$caseIndexesMopm2 = [464:1:479]     % last 16

$qFunctions = f.allNamed(fs = m.sKeyMap(
  keys = [behavior; avgLastBoolScore; increase; consistency];
  values = [
    f.identity();
    ds.e.sBool.avgScore(
      scoreType = boolean;
      caseIndexes = $caseIndexesParity3
    );
    ds.e.sBool.avgScoreDelta(
      scoreType = unlimited;
      firstIndexes = [-1:1:-1]; 
      secondIndexes = [0:1:1]    
    );
    ds.e.sBool.avgScoreVariation(
      scoreType = unlimited;
      indexes = [-1:1:-1]  
    )
  ]
))

$xorProblem = ea.p.simToTo(
  name = "xor";
  simulation = ds.s.sequentialXor(
    cases = $cases;
    rewardType = unlimited;
    resetAgent = true;
    shuffle = true
  );
  dT = 1;
  tRange = $tRangeLife;
  comparator = ea.comparator.descending(of = f.mapValue(key = avgLastBoolScore));
  qFunction = $qFunctions
)

$parityProblem = ea.p.simToTo(
  name = "parity";
  simulation = ds.s.sequentialBf(
    cases = $casesParity3;
    target = ea.misc.evenParityBf(n = 3);
    rewardType = unlimited;
    resetAgent = true
  );
  dT = 1;
  tRange = $tRangeParity3;
  comparator = ea.comparator.descending(of = f.mapValue(key = avgLastBoolScore));
  qFunction = $qFunctions
)

$mopmProblem = ea.p.simToTo(
  name = "mopm";
  simulation = ds.s.sequentialBf(
    cases = $casesMopm2;
    target = ea.misc.mopmBf(n = 2);
    rewardType = unlimited;
    resetAgent = true
  );
  dT = 1;
  tRange = $tRangeMopm2;
  comparator = ea.comparator.descending(of = f.mapValue(key = avgLastBoolScore));
  qFunction = $qFunctions
)