% REQUIRED CMD-LINE PARAMS: $seeds, $nOfEvals, $innerLayers

@import("imports/cases.txt")
@import("imports/problem.txt")
@import("imports/mappers.txt")
@import("imports/listeners.txt")

ea.experiment(
  runs = (randomGenerator = (seed = $seeds) * [m.defaultRG()])
  * (problem = [$xorProblem])
  * (solver = (stop = ea.sc.nOfQualityEvaluations(n = $nOfEvals)) * [
    ea.s.ga(
      name = "hebbian-network";
      representation = ea.representation.doubleString();
      mapper = $hebbianNetworkMapper;
      remap = true
    );
    ea.s.ga(
      name = "hebbian-synapse";
      representation = ea.representation.doubleString();
      mapper = $hebbianSynapseMapper;
      remap = true
    );
    ea.s.ga(
      name = "freeForm";
      representation = ea.r.srTree(
        ephemeral = true;
        operators = [addition; subtraction; multiplication; prot_division; prot_log; max; min; tanh; gt; lt; ternary]
      );
      mapper = $freeFormMapper;
      remap = true
    )
  ])
  * [ea.run()];
  listeners = [
    $console;
    $consoleCSV;
    $avgLastBoolScore;
    $increase;
    $consistency;
    %$frozenFitness;
    $frozenScore;
    $longerLife;
    $stateTraj;
    $srTree;
    $bestBehavior
  ]
)