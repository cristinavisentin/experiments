$dT = 0.1
$tRange = m.range(min = 0; max = 60)

@import("imports/functions.txt")
@import("imports/arenas.txt")
@import("imports/problem.txt")
@import("imports/listeners.txt")

$innerLayers = [8; 8; 8]
$weightsUpdateInterval = 5
$initialWeightRange = m.range(min = -0.01; max = 0.01)

ea.experiment(
  runs = (randomGenerator = (seed = $seeds) * [m.defaultRG()])
  * (problem = $problem)
  * (solver = (stop = ea.sc.nOfQualityEvaluations(n = $nOfEvals)) * [
    ea.s.ga(
      name = "mlp";
      representation = ea.representation.doubleString();
      mapper = ea.mapper.ndsToNrla(of = ea.mapper.dsToParametrized(parametrized = ds.num.mlp(innerLayers = $innerLayers)))
    );
    ea.s.ga(
      name = "hebbian+synapse+random";
      representation = ea.representation.doubleString();
      mapper = ea.mapper.ndsToNrla(of = ea.mapper.dsToParametrized(parametrized = ds.num.hebbianMlp(innerLayers = $innerLayers; parametrizationType = synapse; weightInitializationType = random; weightsUpdateInterval = $weightsUpdateInterval; initialWeightRange = $initialWeightRange)))
    );
    ea.s.ga(
      name = "hebbian+network+random";
      representation = ea.representation.doubleString();
      mapper = ea.mapper.ndsToNrla(of = ea.mapper.dsToParametrized(parametrized = ds.num.hebbianMlp(innerLayers = $innerLayers; parametrizationType = network; weightInitializationType = random; weightsUpdateInterval = $weightsUpdateInterval; initialWeightRange = $initialWeightRange)))
    );
    ea.s.ga(
      name = "freeForm+random";
      representation = ea.representation.srTree();
      mapper = ea.mapper.parametrized(of = ea.mapper.srTreeToNurf(); parametrized = ds.rl.num.freeFormMlp(innerLayers = $innerLayers; weightInitializationType = random; weightsUpdateInterval = $weightsUpdateInterval; initialWeightRange = $initialWeightRange))
    )
  ])
  * [ea.run()];
  listeners = [
    $console; 
    $finalCRF; $finalCRFBoxplot;
    $increaseCRF; $increaseCRFBoxplot;
    $consistencyCRF; $consistencyCRFBoxplot;
    $boxplotFinalDist;
    $drawTrajectories
  ]
)